os: linux
language: cpp
sudo: required
branches:
  only:
  - master
services:
- docker
addons:
  apt:
    update: true
env:
  global:
  - COMMIT=${TRAVIS_COMMIT::7}
  - DOCKERHUB='chalmersfsd'
  - IMAGE=`echo ${TRAVIS_REPO_SLUG#*/}`
  - secure: or21DVKhxr3bnEUyoZlliLKAccSktg9HXLPwwS6N/XRsvRizDTaepxErCx9rdrE8ju2xJujJrIIDlSsC8QzMEihUVhz0gEmRYy9TTqjp66LNCnfegWrtneI6r5hQdVI2YhBaRpws8Ko2+rHz0n1fO7QB4RdJMTWsfpGrWvZ79aJkti1Gw091ax4DcsYwkHjCzz2zrqv8IUh4xb1IVOr9yqRMB1emPMfPEYdUC7bzlT0y3epWuuMecmY8GV5/JEWY2bnQUra9LpRh8UN3w2MnPsOTxrldWLlR62TmdmDsI4OVeTRzJYv3UJTfrIBqrCVfkFW7zWgrvyGQaJT3OQ5kd/3c/OLAGogYjmvm7qrhmproDr5thYE+XYkVY95zWXhlTxHtrw0BAQmy+zgndC/npw5jFls2PZuAjfQUG9+IwDozsA82/AecwNVKVJj58sVCPD1lN6jJSgNZmnUinOttrs58WREFplXSi2MGx/24raKWZeJRQn7jHnFgkPBEcKEswsFDo7i9tEq2KGD1mSh2l0RRZDdEkLIpbnSXuA2oh/QVt5u4yO/lCIRbaBYPK0ytsq0m4i6EFaKu8UQgfpqMx4QjAqJ99rc1+t3UoltWc1yGIGiEbfnKpUTPdCr7b0Ka207PTeFZr13nB6aMzzSSJvwsIZ1eKQXd5w7et0LyaEg=
  - secure: NIm/x48sljkPCi3QPj+esNmdX4h7zEbnBTQzflV8rb+jC/jHcV003lMBtuhlNndaB8zkPPeioASA2kwtr+mpZFgihQzJeHChv6OIcasD5pZthRqvVcfY7anWBwOTWdB7fJ2z38PfMRQ18LGwnU+OywM4AmY6mcpIJaatHFdFemB1TP7PZN0t77R7vAa7h0cHIwQQNcPPJM9fak1WSaQqtMnaLPGfCXI5L8lLwL8dye8YCItmYfo/2Yf0kLaPN73sqHrpaP1M3stHrRk/MGEFwGPQB+YruNIyHl7O+2Zf2jpEiIITMild6pgI+PIbm/Ghz5wXq5puVqRTvG8nnht7bgaQZ1LvVF6VnELjfbOG1ySwGCmVvx8OxqXW/j9ZdQHhL+mlEzTI3+hVMVero95n6XYslt2/pLuQmr6flNhnAb7W3Hb9w/UdidHI0fVUjtC8JdQKHzoqYIMizGCVuPm+ZdoqR5W7x0jsoYMBFhNpCqxge+n3gDlCaSuOSSW8PAG76jw6lSHSqwFfRnd3yztYVyUAQntH/O+2F7ajiUY8yUD4it3uUHdDf2F6Otri97Q5q6L5uq7FmobhnaS4LtAX8vdVvtByAHXd2ciNpHVnEkOfB66PmqUaYABvaFtRCpiqnJVjn/yGpiYkRI0ZB9M40jwSC5r5pa2+sMl94CRKToY=
install:
- cd docker
- make buildComplete createDockerImage
- docker images
- docker tag seresearch/opendlv-cfsd18-on-opendlv-core-on-opendavinci-on-base:latest
  ${IMAGE}:${COMMIT}
script: skip
after_success:
- docker --version
- echo "$DOCKER_PASS" | docker login -u "$DOCKER_USER" --password-stdin
- docker tag ${IMAGE}:${COMMIT} ${DOCKERHUB}/${IMAGE}:${COMMIT}
- docker push ${DOCKERHUB}/${IMAGE}:${COMMIT}
notifications:
  email:
    on_success: never
    on_failure: never
